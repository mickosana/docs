VARIABLES:
- `set` used to create variables
- `env` shows all the variables on your system
- when you define a variable you dont put dollar sign
- when you  call a variable you use $
- `var=$(command)` puts the result of the command into the variable
- to share variables across sessions:
	- use `export`
	- use `set`
- `set -o export` sets all variables to be global
SCRIPTING:
- `read`  get input from the user
- `echo -en ` stops the prompt from going to the next line
- script runs in a different env than the shell
	- `test`
		- allows you to test different for different conditions
		- use man to get more info on the command
	- ` use || ` for when a condition is not true
- for loops:
```
	for <variable> in `seq <number>`
		do
		  \\do task
		done
```

-  while loop
```
while [ condition]
do

done
```
- `$((math operation))` to do things like increment or subtract in a while loop
- Decision making
```
 if 
    condition
then
    another branch
fi
```

USER INTERFACES:
- Display manager starts a display server which starts a compositor which pushes the window to display client
- on ubuntu:
	- gnome is a display client
	- mutter is  a display server
	- GDM is the display manager
- Xorg is build on top of x11
- Wayland components:
	- SDDM
	- wayland puts together the compositor and server together
	- wayland then displays to gnome
- xorg has better hardware support than wayland
- CONFIGURING Xorg:
	- is x is not well it will put a folder called `.xession logs`  in your home directory
	- `xrandr` shows what xorg detects
	- if xorg detects everything ok it doesnt create config files in `/etc/X11`
	- `/usr/share/X11/xorg.conf.d`  for input device configurations
	- you can generate files if they dont exist
		- stop the gdm
		- `ctrl +alt + f3+`  allow you to run in a non gui form
		- `sudo systemctl stop gdm`
		- `X -configure` generates a new config file
		- refer to vendor info to override the info in the new generated file
		- `sudo systecmtl start gdm `  to get back to gui
		- `xhost`  shows you who is allowed to detect the display server
- CONNECTING TO REMORTE X SERVER:
	- allow you to display a machine on another machine
	- it has better clarity than apps line vnc
	- used for tech like remote gaming
	-  check if x11 fowarding is activated
	- `/etc/ssh/sshd_config` check if x11forwarding is yes
	- `ssh -X username@host`  allows you to run ssh with gui capabilities
	- all the processing will be happening on the server while the rendering is happening on your machine
	- `ForwardTrusted yes`  disabled security features
	- `.Xauthority ` is a cookie file
-  DESKTOP ENVIRONMENTS:
	- gnome
		- easily accessible interface
		- mate is a fork is gnome 2
	- KDE:
		- highly customizable
		- popular in the hacker community
		- comes with its own applications
	- XFCE - LXDE: :
		- for good looking ui with which doesnt use a lot of resources
	- `sudo apt install tasksel` allows you to install multiple window managers
- MANAGING ACCOUNTS:
	- *MANAGING USERS*
		- user is just a number
		- `useradd`  used to add a user
		- `adduser` reads a lot of defaults and does some stuff for you
		- `usedel -r`  deletes the home directory of the user
		- `usermod` edit the user details
		- `sudo passwd <username> ` to set the password without displaying it
		- `/etc/login.defs`  comes with the default values for the user accounts
		- `/etc/skel`  has some of the files that are used for creating accounts
		- linux cares about userids
		- `cat /etc/passwd`  has details of the users
		- `cat /etc/shadow`  has encrypted values of the passwords
		- `getent passwd|shadow <username>`  allows you to lookup info from the passwd file and the shadow file
	- *MANAGING GROUPS*
		- They are an optional component that helps you in permissions assignment
		- `cat /etc/group` to see a list of default groups
		- usually a user is associated with a group with the same name
		- `/etc/gshadow` if you have a password for a group
		- `sudo gpasswrd <name_of_group`  to assign a password for a group
		- `sudo groupadd <name>` add a group
		- `sudo  groupmems -g  <group>`  who is in the group
		- `sudo gpasswd -a|A <member> <groupname `capital A makes you admin of the group
		- `groups`  lists all the groups the current user is in, first group is the one you are acting under
		- `newgrp <grpname>` to change the group you are acting under
	- *CREATING SYSTEM ACCOUNTS:*
		- accounts designed to be used by non  human users
		- service/system accounts dont need a password
		- system accounts have uuid less than 1000
			- `/etc/login.defs` defines the min and max for sys accounts using SYS UID MIN AND SYS UID MAX
		- `sudo useradd -r <username>` creates a sys account 
		- `sudo chsh -s /usr/sbin/nologin <username>` removes the shell access
		- 
	
	- *SCHEDULING TASKS*
		- `at 3 AM Fri`  runs a tasks at a specific time, not all distros have it
			- when done typing the commands type d
			- `atrm ` to remove a job
			- `/etc/at.llow | /etc/at.deny` you can only have one of these
		- `cron`  for recurring tasks
			- installed by default
			- `crontab` lists cron table
			- `/var/spool/cron` you will fine jobs
			- `/etc/cron.daily`  daily tasks, just drop a script in there
			- creating crons:
				- use  [crotab.guru](https://crontab.guru)
				- minutes hour day week month day- is the format of the cron expression
				- `cron  -e `
				- `<cron expression> <script>`   in one of the lines
			- `/etc/anacrontab` shows you the crons that are supposed to be caught up when you switch on your laptop
		- scheduling with systemd
			- can do anything you can do with `at`  and `cron` 
			- easier to trouble shoot because it creates entries in the journal
			- steps:
				- create a service
					- add the service file to `etc/systemd/system`
					- must have wants timer file
					- add a .timer file in the same folder
					- time should have requires=service file
					
				- create a timer
				-  monitor with journalctl
				- `man systemd.time` to see formating for timer
				- `journalctl -u servicename`  to view the details about the service
		- *LOCALIZING LINUX*
			- `locale`  shows you detals about your locale
			- `localctl list locales ` 
			- `LC_ALL `used to override all the settings
			-
		-  *MANAGING SYSTEM TIME*
			- `/etc/timezone` has timezone info
			- `tzselect` allows you to select timezone
			- `timedatectl list-timezones`
			- `sudo timedatectl set-time "yyyy-mm-dd hh:mm:"`
			- to set the hardware clock
				- `hwclock -r` read hardware clock
				- `hwlclock --systohoc` write sys to hardware clock
				- `hwclock --hctosys ` write hardware clock to system clock
			- CONFIGURING NTP SERVER:
				- `sudo apt install ntp`  installs the server and the client
				- `edit /etc/ntp.conf`
				- user `server <address` if you only wana use one ntp server
				- `add server <ip> prefer` if you wana setup your own ntp internally
				- `systemctl restart ntp`
				- `ntpq ` to check if the ntp is working properly
			- CONFIGURING NTP CLIENT
				- `timedatectl` check for NTP service and system clock sychronized 
				- `sudo timedatectl set-ntp on|off`
				- `timedatectl timesync-status`
				-  use `pool <server>` is pointing to more than one server as a client in `/etc/ntp.conf`
		- SYSTEM LOGGING:
			- SYSLOG 
				- original system logging
				- `/var/log/syslog`  logs for syslog
				- sys log entry has a facility number and severity
			- RSYSLOG:
				-  allows you to remotely send logs
				- `/etc/rsyslogconf`  configuration for rsyslog
				- `/etc/rsyslog.d/default.conf` allows you to configure where to send the logs
				- `/etc/logrotate.d/rslog`  has configuration for how to rotate your log files
		       - JOURNALD:
			       - intented to replace the above two, modern way of doing things
			       - writes to RAM
			       - `journalctl -b` files since i booted
			       - has filterting already inbuilt
			       - `journalctl -u <service> ` -filter by unit
			       - `journalctl <location of bin>  ` filter by binary
			       - `/etc/systemd/journald.conf ` uncomment autostorage to make it store to disk
		- *MAIL  AGENT5*
			- MTA- moving message from one server to another
				- qmail
				- postfix
				- exim 
				- `mailq` gives you options you can install
				- `sudo apt install mailutils`
				- `sudo dpkg postfix reconfigure`
				- `/etc/postfix/main.cf`
				- `/etc/aliases` to add where to forward messages send to root
				- nc 127.0.0.1 25 to check if the smtp service is working
				- `mail -s "test" email @user` to test if the smtp is setup properly
			- MUA(mail user agents)- allows youn to send and recieve messages
				- dovecot
				- roundcube
				- squirrelmail
		- CONFIGURING PRINTERS:
			- apple created the common units system to help drivers for printers be generic
			- `sudo apt list cups`
			- gnome automatically detects printers
			- to get drivers get a ppd file
			- `/etc/cups/ppd has files for printers
			- `/usr/share/ppd`  other ppd files for printers
			- `sudo lpadmin -h locahost -p <name> -E -v socket://<address> -P <location of ppd file>` adds the printer from the network
			- to test a printer `lp -d <nameof printer> <file>`
			- `lpstat`  list the jobs of a printer
		- NETWORKING:
			- TCP/IP
				 `ip addr` command for address info
				 - network.host 
				 - mask shows you which part of the addr is the network and which one is the host
				 - class A - /8  1-126.x.x.x
				 - class B- /16  128-191.x.x.x
				 - class C- /24  192-239.x.x.x
				- CIDR- removes the need for classes
				- reliable connection 
			- UDP:
				- best effort protocol
			- ISMP:
			- `nslookup <address>`
			- `ss -an |grep <address>`
			- memorize important ports for the exam
			- *CONFIGURING NETWORK ADAPTER*:
				- varies across distros
				- if you not running systemd chances are you are using a config script file
				- `/etc/sysconfig/network-scripts`  contains configuration for networking
				- `ifcfg-eth0`  to change the settings of a network adapter
				- `NM_CONTROLLED` determines if it is controlled by network manager
				- `nmcli device status` all devices you got
				- `nmcli device show <device>`details of a device
				- assign an address:
					- `sudo nmcli connection edit <device>`
						- `set conectionlautoconnect yes`
						- `set ipv4.method manual`
						- `set ipv4.addr <ip>`
						- `set ipv4.gateway <gateway`
				- on ubuntu:
					- `cd /etc/netplan`
					- `render networkmanager | networkd`
					- file number shows priority the lower the higher the priority
				- *TROUBLE SHOOTING*
					- cant connect to server `ping <adddr>`
					- cant resolve address `dig <addr>`
					- `traceroute` shows you where the connection is breaking
					- `mtr` also works the same
					- adding 6 to all the tools allows you to do things in ipv6 mode
					- ping yourself
					- ping our address to check if adapter is working
					- `arp -a` shows you if you can physically connect to the other side
					- `route` who is your default gateway
					- `ip addr` talks to the api of the kernel
					- `routel`-show routing table
					- `ss -an `  replaces netstat
				- APPLICATION NETWORKS:
					- `netcat ` allows you to test what the server is saying , use the `nc `
					- `tcpdump`  shows you the traffic going through an adapter, always use filters otherwse it will flood the terminal
					- `tcpdump -i <interface> src <ip>`>file
				-  NAME RESOLUTION:
					- `/etc/resolve.conf` if its on a non systemd system
					- `/etc/hosts` shows how to translate the name to ip 
					- `resolvectl ` gets settings from `/etc/systemd/resolved.conf` for global settings
					- interface overrides the global config
			**SECURITY**
			- `setuid and setgid ` allows someone to run a command as someone else
			- using setuid:
				- `chmod u+s .script`
				- runs the script as the owner
				- `find / -perm -u+s ` to check files with setuid flag
				- 2000 - setuid
				- 4000-setguid
			- administative access:
				- su
					- `su` switch user
					- 
				- sudo
					- super user do
					- `/etc/sudoers` list of people who can use sudo
					- `visudo` command that lets you edit the sudo file and doesnt save it if you screw it up
					- `sudoedit ` lets you use the default editorin escalated privilege mode without passing the password
					- `sudo -s  lets you get into a root shell without password
			- NETWORK TOOLS
				- `netstat` network statistics
				- `ss`  socket statistics
					- `-t `  tcp stats
					- `-a` all connection
					- `-p`  process using it 
				- `nmap`
					- network mapper
					- `nmap <ip>` gets all the info from the node on all ports
					- `nmap -p <port_rang> <host_rang>`
					- `sudo nmap -sT <>` try to connect to the other side
					- `sudo nmap -sT -PN -p <hosts>`  connect in stealth mode
			- HARDENING LINUX:
				- `Follow the distro docs hardening doc`
				- `apparmor` installed by default on ubuntu
				- `SELinux very useful `
				- Openscap 
			- CONFIGURING SSH:
				- encrypted terminal 
				- `/etc/sshd_config`
					- allow users  list of users who can use ssh
					- allowgroups also to add the groups allowed
				- changes dont affect running connections
				- configure ssh client:
					- `ssh username@host`
					- `/.ssh/known_host`  keeps fingerprints for hosts you have connected to
					- never trust keys thats exist on a system
					- `id_rsa.pub` is given so that anyone can encrypt data with it and we can decrypt it with the private key key
					- `ssh-copy-id username@host`  to add a key to the server,at first it will ask you for a password then it will copy the key
					- `ssh -oKeyA <Keyalgorthm>`  to add a another method
					- `~/.ssh/config` :
						- `Host <address>`
							- `KexAlgorithm <algorithm>`
					- *CONFIGURINH GPG*
						- gnu privacy guard(open source)
							- easy way someone can generate pub keys to give to people for them to encrypt data and send to them
						- `sudo apt install gpg`
						- `gpg --gen-key` to generate a key
						- creates a ~/.gnupg  folder
						- linux can sometimes take long because of entropy
							- `cat /proc/sys/kernel/random/entropy_avail` gives you the number of entropy remaining 
						- `gpg --export --output ~/.name.pub`
						- receiver will do `gpg --import <key>`
						- to encrypt
							- `gpg --encrypt  -r email`
						- to read encrypted file `gpg nameofgpggile`
				- SSH tunneling:
					- you can  send any traffic across an ssh tunnel
					- miniature vpn
					- `ssh <user>@host -L <localport>:<remoteserver>:<remoteport>`
						- `-f` allows you to to keep the connection alive in background
					- even when port 80 is blocked on the other end you can access it though this method
					- 